<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>파이썬 기반의 대규모 알고리즘 트레이딩 시스템 소개 | Sangwon’s Daily Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="파이썬 기반의 대규모 알고리즘 트레이딩 시스템 소개" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="김도형 @ PyCon Korea 2015" />
<meta property="og:description" content="김도형 @ PyCon Korea 2015" />
<link rel="canonical" href="https://sangwon-woo.github.io/dailyblog/markdown/algorithm-trading/trading/python/2021/10/19/post006.html" />
<meta property="og:url" content="https://sangwon-woo.github.io/dailyblog/markdown/algorithm-trading/trading/python/2021/10/19/post006.html" />
<meta property="og:site_name" content="Sangwon’s Daily Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-19T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://sangwon-woo.github.io/dailyblog/markdown/algorithm-trading/trading/python/2021/10/19/post006.html","@type":"BlogPosting","headline":"파이썬 기반의 대규모 알고리즘 트레이딩 시스템 소개","dateModified":"2021-10-19T00:00:00-05:00","datePublished":"2021-10-19T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://sangwon-woo.github.io/dailyblog/markdown/algorithm-trading/trading/python/2021/10/19/post006.html"},"description":"김도형 @ PyCon Korea 2015","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/dailyblog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://sangwon-woo.github.io/dailyblog/feed.xml" title="Sangwon's Daily Blog" /><link rel="shortcut icon" type="image/x-icon" href="/dailyblog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/dailyblog/">Sangwon&#39;s Daily Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/dailyblog/about/">About Me</a><a class="page-link" href="/dailyblog/gitInfo/">Github</a><a class="page-link" href="/dailyblog/search/">Search</a><a class="page-link" href="/dailyblog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">파이썬 기반의 대규모 알고리즘 트레이딩 시스템 소개</h1><p class="page-description">김도형 @ PyCon Korea 2015</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-10-19T00:00:00-05:00" itemprop="datePublished">
        Oct 19, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      6 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/dailyblog/categories/#markdown">markdown</a>
        &nbsp;
      
        <a class="category-tags-link" href="/dailyblog/categories/#algorithm-trading">algorithm-trading</a>
        &nbsp;
      
        <a class="category-tags-link" href="/dailyblog/categories/#trading">trading</a>
        &nbsp;
      
        <a class="category-tags-link" href="/dailyblog/categories/#python">python</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#algorithm-trading-system">Algorithm Trading System</a></li>
<li class="toc-entry toc-h2"><a href="#셀-사이드-vs-바이-사이드">셀 사이드 vs 바이 사이드</a></li>
<li class="toc-entry toc-h2"><a href="#알고리즘-트레이딩">알고리즘 트레이딩</a></li>
<li class="toc-entry toc-h2"><a href="#알고리즘-트레이딩과-파이썬">알고리즘 트레이딩과 파이썬</a></li>
<li class="toc-entry toc-h2"><a href="#python-technology-stack">Python Technology Stack</a></li>
<li class="toc-entry toc-h2"><a href="#시장-정보">시장 정보</a></li>
<li class="toc-entry toc-h2"><a href="#시장정보-데이터베이스--api">시장정보 데이터베이스 &amp; API</a></li>
<li class="toc-entry toc-h2"><a href="#시장-정보-api">시장 정보 API</a></li>
<li class="toc-entry toc-h2"><a href="#tickdb-class">TickDb Class</a></li>
<li class="toc-entry toc-h2"><a href="#historicalticktb-class---과거-틱-데이터">HistoricalTickTb Class - 과거 틱 데이터</a></li>
<li class="toc-entry toc-h2"><a href="#dailydb-class---과거-시장-분석-데이터">DailyDb Class - 과거 시장 분석 데이터</a></li>
<li class="toc-entry toc-h2"><a href="#message">Message</a></li>
<li class="toc-entry toc-h2"><a href="#이벤트-기반-전략">이벤트 기반 전략</a></li>
<li class="toc-entry toc-h2"><a href="#전략-구현-클래스-라이브러리">전략 구현 클래스 라이브러리</a></li>
<li class="toc-entry toc-h2"><a href="#이벤트-처리-함수의-구현-방법">이벤트 처리 함수의 구현 방법</a></li>
<li class="toc-entry toc-h2"><a href="#틱데이터-기반-백테스트back-test">틱데이터 기반 백테스트(Back-test)</a></li>
<li class="toc-entry toc-h2"><a href="#peg--layering">PEG &amp; LAYERING</a></li>
</ul><h2 id="algorithm-trading-system">
<a class="anchor" href="#algorithm-trading-system" aria-hidden="true"><span class="octicon octicon-link"></span></a>Algorithm Trading System</h2>
<p>알고리즘 트레이딩 = 증권 업무 자동화 시스템
업무 : 증권, 자산운용
혼자서 돈을 버는 기계가 아니다.</p>

<h2 id="셀-사이드-vs-바이-사이드">
<a class="anchor" href="#%EC%85%80-%EC%82%AC%EC%9D%B4%EB%93%9C-vs-%EB%B0%94%EC%9D%B4-%EC%82%AC%EC%9D%B4%EB%93%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>셀 사이드 vs 바이 사이드</h2>
<ul>
  <li>바이 사이드 : 자산운용. 어떤 증권이 오를 것인가. 이 과정에서 컴퓨터 시스템과 알고리즘을 사용하는 것을 Quant Investment, 즉 퀀트 운용이라고 한다. 퀀트 운용은 알고리즘 트레이딩과 다르다.<br>
퀀트 운용에는 퀀트 펀드, 전략 인덱스, 로보 어드바이저 등이 있다.<br>
퀀트 운용에서는 주문이 나가지 않는다. 거래소랑 네트워크로 연결되어 있지 않다.<br>
반면 알고리즘 트레이딩은 거래소와 연결이 되어 실제 주문을 내고 변경하고 취소하는 주문의 제어가 같이 이루어진다. 퀀트 전략 + 실제 네트워크를 통한 트레이딩이 시스템 트레이딩이다. 근데 시스템 트레이딩은 성격이 바이 사이드에 가깝다. 알고리즘 트레이딩에서 시스템 트레이딩이 차지하는 영역은 작다. 대부분은 대량 최적 집행과 HFT 마켓 메이킹이다.</li>
</ul>

<h2 id="알고리즘-트레이딩">
<a class="anchor" href="#%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-%ED%8A%B8%EB%A0%88%EC%9D%B4%EB%94%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>알고리즘 트레이딩</h2>
<ul>
  <li>대량 최적 집행(Optimal Execution) : 대량 주문을 쪼개서 보내는 것. 대표적인 것이 TWAP(Time Weighted Average Price)</li>
  <li>마켓 메이킹(Market Making)
    <ul>
      <li>유동성 공급(LP; Liquidity Providing)</li>
      <li>매수/매도 양방향 지정가 주문
        <ul>
          <li>지정가 주문(Limit Order) : FIFO Queue. 줄 서서 사거나 파는 사람들.</li>
          <li>시장가 주문(Market Order) : 큐에서 주문 체결(소모). 줄 서지 않고 바로 사거나 파는 사람들. 가격 필드는 없고 수량 필드만 주어진다. 만약 매수를 한다면 팔겠다는 FIFO Queue에 가서 내가 사고 싶은 수량만큼 사서 받아가는 것. 그럼 거래가 체결되는 것. 큐를 따라서 쭈욱 올라가는 것을 Sweeping이라고 함. 이런 스위핑을 보통 신문에서는 매매 사고라고 한다.</li>
          <li>High Frequency Trading. 대부분은 시장가 주문을 한다. 누군가 지정가 주문으로 기다려줘야 한다. 근데 마켓 메이킹은 사겠다는 사람에겐 팔고 팔겠다고 하는 사람에겐 사는 역할을 해서 중간 센터같은 존재다. 다만 살 때는 싸게 사고 팔 때는 비싸게 판다.<br>
  사는 가격과 파는 가격의 차이를 스프레드라고 부른다.<br>
  수익 = 매수/매도 스프레드 * 거래량<br>
  리스크 관리 : 포지션/변동성/추세에 따른 스프레드 조정</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>일반적인 업무 자동화 시스템과의 차이점
    <ul>
      <li>핵심 비즈니스 로직(전략)이 고정되어 있지 않음.
        <ul>
          <li>변화하는 시장 상황에 따라 지속적인 업그레이드 필요</li>
          <li>개별 사용자(트레이더) 별로 비즈니스 로직을 별도 개발 및 적용</li>
          <li>사용 및 관리가 쉬운 스크립트 구현 선호</li>
        </ul>
      </li>
      <li>오작동 = 초대형 손실
        <ul>
          <li>다양한 테스트 환경 및 시나리오 요구 조건 필요</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="알고리즘-트레이딩과-파이썬">
<a class="anchor" href="#%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-%ED%8A%B8%EB%A0%88%EC%9D%B4%EB%94%A9%EA%B3%BC-%ED%8C%8C%EC%9D%B4%EC%8D%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>알고리즘 트레이딩과 파이썬</h2>
<ul>
  <li>분석 매매 단일 플랫폼
    <ul>
      <li>훌륭한 시장 분석 없이 훌륭한 매매 전략은 생기지 않는다</li>
      <li>알고리즘 트레이딩의 파워는 자동화/대량처리를 통한 비용절감이다</li>
      <li>매매에 필요한 파라미터를 수동으로 결정하면
        <ul>
          <li>자동화/대량처리 불가능</li>
          <li>입력 실수로 인한 사고 위험</li>
        </ul>
      </li>
      <li>알고리즘 트레이딩이 원래의 파워를 발휘하려면
        <ul>
          <li>대규모의 실시간 병렬처리 시장분석</li>
          <li>시장 분석 결과를 사용한 전략 파라미터 자동 결정 및 검증</li>
          <li>대규모의 트레이딩 업무 및 운용전략 동시수행을 통한 비용 절감</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>그럼 왜 파이썬?
    <ul>
      <li>분석 매매 단일 플랫폼 구현 가능
        <ul>
          <li>다양한 분석 라이브러리 연동</li>
          <li>interacitve console 기반의 실시간 시장 분석 가능</li>
        </ul>
      </li>
      <li>전략(비즈니스 로직) 코드 개발 및 관리
        <ul>
          <li>개발 생산성 향상</li>
          <li>클러스터 상에서 사용자의 비즈니스 로직의 관리/배포 용이</li>
        </ul>
      </li>
      <li>다양한 컴포넌트 연결
        <ul>
          <li>다양한 미들웨어, 데이터베이스 및 라이브러리 연결 용이</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="python-technology-stack">
<a class="anchor" href="#python-technology-stack" aria-hidden="true"><span class="octicon octicon-link"></span></a>Python Technology Stack</h2>
<ol>
  <li>파이썬 시스템 - anaconda</li>
  <li>데이터베이스 - redis-py, pytables, pymongo, log4mongo</li>
  <li>자료 관리 및 분석 - numpy, pandas, statsmodels, ta-lib</li>
  <li>시각화 - matplotlib, seaborn</li>
  <li>실시간 시장분석 - ipython, jupyter</li>
  <li>메시지 미들웨어 - simplejson, ujson, pyzmq</li>
  <li>Finite State Machine - fysom</li>
  <li>프로세스 관리 - psutil, apscheduler, fabric, supervisord</li>
  <li>사용자 인터페이스 - tornado, django</li>
</ol>

<h2 id="시장-정보">
<a class="anchor" href="#%EC%8B%9C%EC%9E%A5-%EC%A0%95%EB%B3%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>시장 정보</h2>
<ol>
  <li>Tick Data
    <ul>
      <li>종목정보, 호가, 체결, 프로그램 매매, 투자자 정보 등</li>
      <li>거래소로부터 전송되는 모든 실시간 시장정보</li>
      <li>불규칙 샘플링 자료</li>
    </ul>
  </li>
  <li>일중 데이터(Intraday Data)
    <ul>
      <li>분봉 시고저종</li>
      <li>분단위 샘플링 틱 데이터</li>
    </ul>
  </li>
  <li>일간 데이터(Daily Data)
    <ul>
      <li>일봉 시고저종</li>
      <li>일단위 통계/분석 자료</li>
    </ul>
  </li>
</ol>

<h2 id="시장정보-데이터베이스--api">
<a class="anchor" href="#%EC%8B%9C%EC%9E%A5%EC%A0%95%EB%B3%B4-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4--api" aria-hidden="true"><span class="octicon octicon-link"></span></a>시장정보 데이터베이스 &amp; API</h2>
<p>데이터의 종류가 다양해서 데이터베이스의 종류도 다양. 3가지 종류의 데이터베이스 시스템.</p>
<ol>
  <li>인메모리 디비 : 틱데이터 실시간 처리. 레디스.</li>
  <li>HDF5 : 과거 틱 데이터 저장.</li>
  <li>MongoDB : 분봉, 분석 데이터 등. 
틱 데이터는 실시간으로 message-oriented middleware를 통해 전송되고 다른 데이터들은 각각의 타입에 따라서 api를 만들어 놓음.</li>
</ol>

<h2 id="시장-정보-api">
<a class="anchor" href="#%EC%8B%9C%EC%9E%A5-%EC%A0%95%EB%B3%B4-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>시장 정보 API</h2>
<ul>
  <li>시장 정보 종류별 데이터베이스 클래스 지원</li>
  <li>모든 시장정보는 pandas DataFrame 형식으로 출력
    <ol>
      <li>TickDb Class : In-Memory Database에 저장된 당일의 실시간 틱 데이터</li>
      <li>HistoricalTickDb Class : HDF5 Database에 저장된 과거 틱 데이터</li>
      <li>DailyDb 클래스 : MongoDB에 저장된 당일 및 과거의 시장 분석 데이터</li>
    </ol>
  </li>
</ul>

<h2 id="tickdb-class">
<a class="anchor" href="#tickdb-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>TickDb Class</h2>
<p>method - 기능 순
code_st() : 주식 종목정보
code_fo() : 선물옵션 종목정보
code_id() : 지수 종목정보
code_br() : 거래원 정보
ticker_st() : 주식 티커 목록
ticker_fo() : 선물옵션 티커 목록
isin_st() : 주식 isin 목록
isin_fo() : 선물옵션 isin 목록
is_in_ticker_st() : 주식티커 확인
is_in_ticker_fo() : 선물옵션 티커 확인
is_in_isin_st() : 주식 isin 확인
is_in_isin_fo() : 선물옵션 isin 확인
isin2inst() : isin-종목유형 변환
isin2ticker() : isin-ticker 변환
ticker2inst() : ticker-종목유형 변환
ticker2isin() : ticker-isin 변환
get_isin2inst() : isin-종목유형 map
get_isin2ticker() : isin-ticker map
get_ticker2inst() : ticker-종목유형 map
get_ticker2isin() : ticker-isin map
session() : 장정보
trade_st() : 주식 체결 틱 히스토리
trade_fo() : 선물옵션 체결 틱 히스토리
quote_st() : 주식 호가 틱 히스토리
quote_fo() : 선물옵션 호가 틱 히스토리
minute_st() : 주식 분봉 히스토리
minute_fo() : 선물옵션 분봉 히스토리
program_st() : 주식 프로그램 매매 히스토리
broker_st() : 주식 거래원 히스토리
index() : 지수 히스토리
list_methods() : 클래스 메소드 목록
list_members() : 클래스 멤버 목록</p>

<h2 id="historicalticktb-class---과거-틱-데이터">
<a class="anchor" href="#historicalticktb-class---%EA%B3%BC%EA%B1%B0-%ED%8B%B1-%EB%8D%B0%EC%9D%B4%ED%84%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>HistoricalTickTb Class - 과거 틱 데이터</h2>
<ul>
  <li>과거 틱데이터 액세스</li>
  <li>TickDb와 동일한 메소드 지원</li>
  <li>시뮬레이션을 위한 추가 메소드
set_date() : 날짜 지정
set_time() : 시간 지정</li>
  <li>과거의 특정 시각에 시장을 보는 것과 같은 효과</li>
</ul>

<h2 id="dailydb-class---과거-시장-분석-데이터">
<a class="anchor" href="#dailydb-class---%EA%B3%BC%EA%B1%B0-%EC%8B%9C%EC%9E%A5-%EB%B6%84%EC%84%9D-%EB%8D%B0%EC%9D%B4%ED%84%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>DailyDb Class - 과거 시장 분석 데이터</h2>
<ul>
  <li>틱 데이터의 분단위 스냅샷</li>
  <li>분봉 및 일봉</li>
  <li>시장 모형 기반의 분석 자료
code_st() : 주식 종목정보
code_fo() : 선물옵션 종목정보
code_id() : 지수 종목정보
intraday_st() : 주식의 분단위 스냅샷 데이터
intraday_fo() : 선물옵션의 분단위 스냅샷 데이터
intraday_id() : 지수의 분단위 스냅샷 데이터
daily_st() : 주식의 일단위 데이터
daily_fo() : 선물옵션의 일단위 데이터
daily_id() : 지수의 일단위 데이터</li>
</ul>

<h2 id="message">
<a class="anchor" href="#message" aria-hidden="true"><span class="octicon octicon-link"></span></a>Message</h2>
<ul>
  <li>Message-Oriented Middleware 기반의 통신
    <ul>
      <li>현재 ZeroMQ, Formula 미들웨어 지원</li>
      <li>복수 미들웨어 동시 사용 가능</li>
      <li>실시간 시장/주문 정보는 FIX 프로토콜에 기반한 JSON 문자열</li>
    </ul>
  </li>
  <li>메시지 처리상의 주의점
    <ul>
      <li>모든 메시지는 시계열 정보(time series)이므로 병렬처리 불가</li>
      <li>시장 정보의 경우에는 최신(lastest)의 정보만 처리해야함. 시장 정보 큐(queue)에 복수 정보가 있을 경우 과거 정보 삭제</li>
    </ul>
  </li>
</ul>

<h2 id="이벤트-기반-전략">
<a class="anchor" href="#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EA%B8%B0%EB%B0%98-%EC%A0%84%EB%9E%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>이벤트 기반 전략</h2>
<ul>
  <li>이벤트 = 실시간 시장 및 주문 정보</li>
  <li>알고리즘 트레이딩 시스템 = 복합 이벤트 처리 시스템</li>
</ul>

<h2 id="전략-구현-클래스-라이브러리">
<a class="anchor" href="#%EC%A0%84%EB%9E%B5-%EA%B5%AC%ED%98%84-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>전략 구현 클래스 라이브러리</h2>
<ul>
  <li>BaseStrategy 베이스 클래스</li>
  <li>Component 클래스
    <ul>
      <li>Event</li>
      <li>Socket</li>
      <li>원주문(Meta-Order)</li>
      <li>버퍼(Buffer)</li>
      <li>주문(Order)</li>
      <li>체결(Trade)</li>
      <li>포지션(Position)</li>
      <li>종목별 손익(Asset)</li>
      <li>전체 손익(Book)</li>
    </ul>
  </li>
</ul>

<h2 id="이벤트-처리-함수의-구현-방법">
<a class="anchor" href="#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%B2%98%EB%A6%AC-%ED%95%A8%EC%88%98%EC%9D%98-%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>이벤트 처리 함수의 구현 방법</h2>
<ul>
  <li>방법 1 : 전략 클래스의 이벤트 핸들러 메소드 오버라이드
    <ul>
      <li>수신되는 이벤트의 유형에 따라 호출되는 이벤트 핸들러 메소드가 미리 정해져 있음.</li>
      <li>특정 이벤트 메소드를 오버라이드 구현하여 원하는 동작 실현</li>
    </ul>
  </li>
  <li>방법 2 : 이벤트 필터
    <ul>
      <li>전략의 상태(Finite State)와 수신 이벤트의 유형의 조합으로 이벤트 핸들러 선택</li>
      <li>복수의 이벤트 핸들러 수행 가능</li>
      <li>이벤트 핸들러를 동적으로 추가/제거 가능</li>
    </ul>
  </li>
</ul>

<h2 id="틱데이터-기반-백테스트back-test">
<a class="anchor" href="#%ED%8B%B1%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B8%B0%EB%B0%98-%EB%B0%B1%ED%85%8C%EC%8A%A4%ED%8A%B8back-test" aria-hidden="true"><span class="octicon octicon-link"></span></a>틱데이터 기반 백테스트(Back-test)</h2>
<ul>
  <li>성능 평가 및 사고 예방을 위한 필수 과정</li>
  <li>실시간 코드와 동일한 전략 코드로 틱 이벤트 기반의 백테스트</li>
  <li>In-the-Loop 방식이 아닌 시뮬레이션 방식의 백테스트 지원
    <ul>
      <li>실제 통신을 하지 않고 직접 이벤트 핸들러 호출</li>
      <li>테스트 병렬처리, 속도, 배치 프로세싱, 디버그 브레이크</li>
      <li>타이머 시뮬레이션 가능
backtest_set_datetime() : 백테스트를 시작할 일시 지정
backtest_set_breaktime() : 백테스트를 중지할 일시 지정
backtest_step() : 1개의 이벤트 처리
backtest_go() : 미리 지정한 중지 시점까지 처리</li>
    </ul>
  </li>
</ul>

<h2 id="peg--layering">
<a class="anchor" href="#peg--layering" aria-hidden="true"><span class="octicon octicon-link"></span></a>PEG &amp; LAYERING</h2>
<ul>
  <li>Layering : 지정가 주문을 여러 호가에 분할</li>
  <li>Pegging : 호가가 변화하는 경우 최우선 호가로 추종</li>
</ul>


  </div><a class="u-url" href="/dailyblog/markdown/algorithm-trading/trading/python/2021/10/19/post006.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/dailyblog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/dailyblog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/dailyblog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Simple TIL trace</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/sangwon-woo" target="_blank" title="sangwon-woo"><svg class="svg-icon grey"><use xlink:href="/dailyblog/assets/minima-social-icons.svg#github"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
